%table.row
  %tr
    %td.wrapper
      %table.ten.columns
        %tr
          %td
            %h1
              = Order.model_name.human.capitalize
              %span.small= @order.to_s
          %td.expander
    %td.wrapper.last
      %table.two.columns
        %tr
          %td
            = image_tag(image_url('spry-logo.svg'))

%hr
%table.row
  %tr
    %td.wrapper.last
      %table.twelve.columns
        %tr
          %td.panel
            %table
              %col{width: '200px'}
              %tr
                %th= Order.human_attribute_name(:company_name)
                %td= @order.company_name
              %tr
                %th= Order.human_attribute_name(:contact_person)
                %td= @order.contact_person
              - if @order.has_shipping?
                %tr
                  %th= Order.human_attribute_name(:shipping_at)
                  %td= l(@order.shipping_at)
                %tr
                  %th= Order.human_attribute_name(:billing_address)
                  %td= @order.billing_address
                %tr
                  %th
                  %td= @order.billing_postalcode
                %tr
                  %th
                  %td= @order.billing_city
                %tr
                  %th= Order.human_attribute_name(:shipping_address)
                  %td= @order.shipping_address
                %tr
                  %th
                  %td= @order.shipping_postalcode
                %tr
                  %th
                  %td= @order.shipping_city
              %tr
                %th= Order.human_attribute_name(:notes)
                %td= simple_format(@order.notes)
          %td.expander

%hr
%table.row
  %tr
    %td.wrapper.last
      %table.twelve.columns
        %tr
          %td
            %table{style: 'width: 100%;'}
              %col{width: '30%'}
              %thead
                %tr
                  %th= OrderItem.human_attribute_name(:product_code)
                  %th= OrderItem.human_attribute_name(:product_title)
                  %th.text-right= OrderItem.human_attribute_name(:amount)
                  %th.text-right à
                  %th.text-right= OrderItem.human_attribute_name(:subtotal)
              %tfoot
                %tr
                  %th{colspan: 3}
                  %th.text-right= Order.human_attribute_name(:grand_total)
                  %th.text-right= number_to_currency(@order.grand_total, unit: '€')
              %tbody
                - @order.order_items.each do |order_item|
                  = content_tag_for :tr, order_item do
                    %td= order_item.product.code
                    %td
                      %strong= order_item.product.title
                      = order_item.product.subtitle
                    %td.text-right= order_item.amount
                    %td.text-right= number_to_currency(order_item.product.sales_price, unit: '€')
                    %td.text-right= number_to_currency(order_item.subtotal, unit: '€')
